MySQL can be accessed via port 3306 on the following DNS name from within your cluster:

{{ template "mysql.fullname" . }}.{{ .Release.Namespace }}.svc.cluster.local

MySQL password setting in env values:

MYSQL_ROOT_PASSWORD={{- if .Values.image.envVars }}
      {{- $rootpassword := index .Values.image.envVars 0 -}}
      {{ $rootpassword.value }}
{{- end }}

MYSQL_USER={{- if .Values.image.envVars }}
      {{- $mysqluser := index .Values.image.envVars 2 -}}
      {{ $mysqluser.value }}
{{- end }}

MYSQL_PASSWORD={{- if .Values.image.envVars }}
      {{- $mysqlpass := index .Values.image.envVars 3 -}}
      {{ $mysqlpass.value }}
{{- end }}

MYSQL_DATABASE={{- if .Values.image.envVars }}
      {{- $mysqldb := index .Values.image.envVars 1 -}}
      {{ $mysqldb.value }}
{{- end }}


Mysql connect test:

 1. Run a pod that you can use as a client:

      kubectl run {{ template "mysql.fullname" . }}-client --rm --tty -i --restart='Never' --image  {{ .Values.image.repository }}:{{ .Values.image.tag }} --namespace {{ .Release.Namespace }} --command -- bash

  2. To connect to master service (read/write):

      mysql -h {{ template "mysql.fullname" . }}.{{ .Release.Namespace }}.svc.cluster.local -uroot -p {{- if .Values.image.envVars }}
      {{- $mysqldb := index .Values.image.envVars 1 -}}
      {{ $mysqldb.value }}
{{- end }}

